<!DOCTYPE html>
<html lang="ga">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>LanguagePrep Ireland - Gaeilge</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üáÆüá™</text></svg>">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root { 
      /* Colores ajustados para la versi√≥n Irlandesa (Verde/Naranja) */
      --primary: #16a34a; /* Verde Irlanda */
      --secondary: #ea580c; /* Naranja */
      --bg: #f0fdf4; /* Fondo verde muy p√°lido */
      --text: #1e293b; 
    }
    body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); padding: 20px; margin: 0; }
    .container { max-width: 800px; margin: 0 auto; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); min-height: 90vh; display: flex; flex-direction: column; }
    
    /* HEADER */
    header { text-align: center; margin-bottom: 25px; }
    h1 { margin: 0; color: var(--primary); font-size: 2.2rem; letter-spacing: -1px; }
    .subtitle { color: var(--secondary); margin-top: 5px; font-size: 0.95rem; font-weight: 700; }
    
    .info-toggle { background: #dcfce7; color: #15803d; border: none; padding: 8px 15px; border-radius: 20px; font-size: 0.85rem; font-weight: 600; cursor: pointer; margin-top: 15px; display: inline-flex; align-items: center; gap: 5px; }
    .info-box { display: none; background: #f0fdf4; border: 1px solid #bbf7d0; padding: 15px; border-radius: 12px; margin-bottom: 20px; text-align: left; font-size: 0.9rem; color: #334155; }

    /* SECTION: CONVERSATION STYLES */
    .level-selector { display: flex; background: #f8fafc; padding: 5px; border-radius: 12px; margin-bottom: 20px; border: 1px solid #e2e8f0; }
    .level-btn { flex: 1; padding: 10px; border: none; border-radius: 8px; cursor: pointer; font-weight: 700; transition: 0.3s; font-size: 0.9rem; color: #64748b; background: transparent; }
    .level-btn.active { background: white; color: var(--primary); box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
    .level-btn.hl.active { color: var(--secondary); }

    .mock-btn { width: 100%; padding: 15px; margin-bottom: 25px; background: linear-gradient(135deg, #16a34a 0%, #059669 100%); color: white; border: none; border-radius: 12px; font-weight: 800; font-size: 1.1rem; cursor: pointer; display: flex; justify-content: center; align-items: center; gap: 10px; box-shadow: 0 4px 15px rgba(22, 163, 74, 0.3); transition: transform 0.2s; }
    .mock-btn:hover { transform: scale(1.02); }

    .topic-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 10px; margin-bottom: 25px; }
    .topic-btn { padding: 12px; border: 1px solid #e2e8f0; border-radius: 10px; background: white; cursor: pointer; font-size: 0.85rem; font-weight: 600; text-align: center; color: #475569; transition: 0.2s; }
    .topic-btn:hover { background: #f0fdf4; }
    .topic-btn.active { border-color: var(--primary); background: #dcfce7; color: var(--primary); transform: scale(1.02); }

    .question-card { background: #fff7ed; border-left: 5px solid var(--secondary); padding: 25px; border-radius: 0 12px 12px 0; margin-bottom: 20px; }
    
    /* SHARED COMPONENTS */
    .audio-btn { margin-top: 15px; background: white; border: 1px solid #e2e8f0; padding: 8px 16px; border-radius: 50px; font-size: 0.9rem; font-weight: 600; cursor: pointer; color: var(--text); }
    textarea { width: 100%; border: 2px solid #e2e8f0; border-radius: 15px; padding: 15px; min-height: 120px; box-sizing: border-box; font-size: 1rem; margin-bottom: 15px; font-family: inherit; }
    textarea:focus { border-color: var(--primary); outline: none; }
    .btn-main { width: 100%; padding: 16px; background: var(--text); color: white; border: none; border-radius: 15px; font-weight: 800; cursor: pointer; font-size: 1.1rem; }
    .btn-main:disabled { opacity: 0.5; cursor: wait; }

    /* RESULT & FOOTER */
    #result { margin-top: 30px; display: none; }
    .student-response-box { background: #f1f5f9; padding: 15px; border-radius: 10px; margin-bottom: 20px; border-left: 4px solid #94a3b8; font-style: italic; color: #475569; }
    .feedback-box { padding: 25px; border-radius: 15px; background: #fff; border: 1px solid #e2e8f0; }
    .error-item { margin-bottom: 15px; padding: 15px; background: #fff1f2; border-radius: 10px; border-left: 4px solid #ef4444; }

    .footer-section { margin-top: auto; padding: 40px 20px 20px; border-top: 1px solid #e2e8f0; background: #fafafa; border-radius: 20px; text-align: center; }
    .profile-img { width: 90px; height: 90px; border-radius: 50%; object-fit: cover; border: 3px solid var(--primary); margin-bottom: 15px; }
    .bio-text { max-width: 600px; margin: 0 auto 25px auto; font-size: 0.95rem; line-height: 1.6; color: #475569; text-align: justify; }
    .revolut-btn { background: #000; color: white; text-decoration: none; padding: 14px 28px; border-radius: 50px; font-weight: 700; display: inline-flex; align-items: center; gap: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); transition: 0.2s; }
    .revolut-btn:hover { transform: translateY(-2px); }
  </style>
</head>
<body>

<div class="container">
  <header>
    <h1>
  <a href="../" style="text-decoration: none; color: inherit; cursor: pointer;">
    LanguagePrep Ireland
  </a>
</h1>
    <p class="subtitle">Module: Leaving Cert Irish (Oral)</p>
    
    <button class="info-toggle" onclick="toggleInfo()">‚ÑπÔ∏è Instructions & Tips</button>
    <div id="infoBox" class="info-box">
      <strong>Instructions / Treoracha:</strong>
      <ul>
        <li>üó£Ô∏è <strong>Comhr√° (Conversation):</strong> Select a topic below to practice.</li>
        <li>üé≤ <strong>Mock Exam:</strong> Click "Start Mock Exam" for 5 random questions.</li>
        <li>‚å®Ô∏è <strong>Keyboard:</strong> Please use the Irish keyboard settings if possible, or type normally (fada's will be checked).</li>
      </ul>
    </div>
  </header>

  <div id="sectionConversation">
    <div class="level-selector">
      <button class="level-btn active" id="btnOL" onclick="setLevel('OL')">Gn√°thleibh√©al (OL)</button>
      <button class="level-btn hl" id="btnHL" onclick="setLevel('HL')">Ardleibh√©al (HL)</button>
    </div>

    <button class="mock-btn" onclick="startMockExam()">üé≤ Start Mock Exam / Tosaigh B√©altriail</button>
    
    <h3 style="margin-left:5px; color:#475569;">Comhr√° Topics:</h3>
    <div class="topic-grid" id="topicGrid"></div>

    <div id="exerciseArea" style="display:none;">
      <div class="question-card">
        <div id="qDisplay" style="font-weight: 700;"></div>
        <button class="audio-btn" onclick="speakText()">üîä √âist (Listen)</button>
      </div>
      <textarea id="userInput" placeholder="Scr√≠obh anseo / Type here..."></textarea>
      <button class="btn-main" id="btnAction" onclick="analyze()">‚ú® Evaluate / Ceartaigh</button>
    </div>

    <div id="result">
      <div class="student-response-box"><strong>You said:</strong> <span id="userResponseText"></span></div>
      <div class="feedback-box">
        <div id="scoreDisplay" style="font-size: 1.8rem; font-weight: 800; margin-bottom: 15px;"></div>
        <div id="fbGA" style="margin-bottom:10px; font-weight:500;"></div>
        <div id="fbEN" style="color:#64748b; font-style:italic;"></div>
        <hr style="margin: 20px 0; border: 0; border-top: 1px solid #e2e8f0;">
        <div id="errorsList"></div>
      </div>
      <button id="btnReset" class="btn-main" style="margin-top:20px; background:#e2e8f0; color:var(--text);" onclick="resetApp()">üîÑ Try another topic</button>
    </div>
  </div>

   <div class="footer-section">
    <img src="david.PNG" alt="David Mart√≠n" class="profile-img" onerror="this.src='https://cdn-icons-png.flaticon.com/512/3135/3135715.png'">
    
    <h3 style="margin: 0 0 5px 0;">David Mart√≠n</h3>
    <p style="margin: 0 0 20px 0; font-size: 0.9rem; color: #64748b;">Teacher at <strong>Ardgillan Community College</strong>.</p>
    
    <div class="bio-text">
      <p><em>As a teacher, my goal is to create innovative tools like <strong>LanguagePrep Ireland</strong> to help students excel in their Leaving Cert exams using technology responsibly and effectively.</em></p>
      <p><em>Is √© an sprioc at√° agam n√° acmhainn√≠ nua-aimseartha a chruth√∫ chun cabhr√∫ le dalta√≠ barr feabhais a bhaint amach san Ardteistim√©ireacht.</em></p>
    </div>

    <a href="https://revolut.me/davidkhy4/pocket/TbT6B5Grkq" target="_blank" class="revolut-btn">‚òï Support this Project</a>
    
    <div style="margin-top: 25px; font-size: 0.85rem; line-height: 1.6; color: #475569;">
      <p>All resources are 100% free. If this tool helps you, consider supporting the project.</p>
    </div>

    <div style="margin-top: 35px; border-top: 1px dashed #cbd5e1; padding-top: 25px;">
      <p style="font-size: 0.9rem; font-weight: 700; color: #334155; margin-bottom: 5px;">üí° Anonymous Suggestion Box</p>
      <p style="font-size: 0.75rem; color: #64748b; margin-bottom: 15px;">
        Found a bug? Have an idea? Let me know!<br>
        <span style="color:#ef4444;">Please DO NOT include your name or personal details.</span>
      </p>
      
      <form action="https://formspree.io/f/mjggeygj" method="POST" style="max-width: 450px; margin: 0 auto; text-align: left;">
        
        <textarea name="message" placeholder="Type your suggestion or report a bug here..." required
                  style="width: 100%; padding: 12px; min-height: 80px; margin-bottom: 15px; border-radius: 10px; border: 1px solid #cbd5e1; box-sizing: border-box; font-family: inherit; font-size: 0.9rem;"></textarea>
        
        <button type="submit" 
                style="width: 100%; background: #475569; color: white; border: none; padding: 10px; border-radius: 50px; font-weight: 700; cursor: pointer; transition: 0.2s; font-size: 0.9rem;">
          Send Feedback (Anonymous)
        </button>
      </form>
    </div>

  </div>

<script>
// ===========================================
// CONFIGURACI√ìN Y CLAVES (API KEY)
// ===========================================
// PEGA AQU√ç TU CLAVE DE API DE GOOGLE GEMINI
const parteA = "AIzaSyASf_PIq7es0iPVt"; 
const parteB = "VUMt8Kn1Ll3qSpQQxg"; 
const API_KEY = parteA + parteB;

// --- NAVEGACI√ìN ---
function toggleInfo() { const b = document.getElementById('infoBox'); b.style.display = b.style.display === 'block' ? 'none' : 'block'; }

// ===========================================
// PARTE: CONVERSATION (Gaeilge Logic)
// ===========================================
let currentLevel = 'OL';
let currentTopic = null;
let isMockExam = false; 
let mockQuestions = []; 
let mockIndex = 0;      

// ===========================================
// DATA CURATED BY EXPERT LEAVING CERT EXAMINER
// ===========================================
const DATA = [
  { 
    title: "1. M√© F√©in (Myself)", 
    OL: "C√©n t-ainm at√° ort? C√©n aois th√∫? Inis dom f√∫t f√©in (dath na s√∫l, gruaig).", 
    HL: "Inis dom f√∫t f√©in. C√©n saghas duine th√∫? Cad iad na buanna agus na laig√≠ at√° agat?" 
  },
  { 
    title: "2. Mo Chlann (Family)", 
    OL: "C√© mh√©ad duine at√° i do theaghlach? An bhfuil dearth√°ireacha n√≥ deirfi√∫racha agat?", 
    HL: "An r√©it√≠onn t√∫ go maith le do thuismitheoir√≠ i gc√≥na√≠? Inis dom faoin duine is sine sa chlann." 
  },
  { 
    title: "3. An Scoil (School)", 
    OL: "C√©n t-√°bhar is fearr leat? An maith leat an √©ide scoile (uniform)?", 
    HL: "D√©an cur s√≠os ar na h√°iseanna sa scoil seo (leabharlann, halla sp√≥irt). Cad a dh√©anf√° chun an scoil a fheabhs√∫?" 
    // Nota: "Cad a dh√©anf√°" fuerza el Condicional (puntos extra).
  },
  { 
    title: "4. Caitheamh Aimsire (Hobbies)", 
    OL: "Cad a dh√©anann t√∫ ag an deireadh seachtaine? An imr√≠onn t√∫ sp√≥rt?", 
    HL: "C√©n t√°bhacht a bhaineann leis an sp√≥rt do dhaoine √≥ga? An gceapann t√∫ go bhfuil an iomarca br√∫ ar dhaoine √≥ga inniu?" 
  },
  { 
    title: "5. Mo Cheantar (Area)", 
    OL: "C√° bhfuil t√∫ i do ch√≥na√≠? An bhfuil picti√∫rlann n√≥ p√°irc in aice l√°imhe?", 
    HL: "D√©an cur s√≠os ar d‚Äô√°it ch√≥naithe. Cad iad na fadhbanna s√≥isialta at√° i do cheantar f√©in (coiri√∫lacht, druga√≠)?" 
  },
  { 
    title: "6. Laethanta Saoire (Holidays)", 
    OL: "C√° ndeachaigh t√∫ ar laethanta saoire anuraidh? Ar thaitin an bia leat?", 
    HL: "An fearr leat laethanta saoire in √âirinn n√≥ thar lear? D√° mbuaf√° an Crannchur N√°isi√∫nta, c√° rachf√°?" 
    // Nota: Pregunta de Loter√≠a = Condicional cl√°sico.
  },
  { 
    title: "7. Obair Bhaile (Homework)", 
    OL: "C√© mh√©ad ama a chaitheann t√∫ ar obair bhaile gach o√≠che?", 
    HL: "An gceapann t√∫ go bhfuil an c√≥ras point√≠ san Ardteist cothrom? Cad √© do thuairim faoin mbr√∫ scoile?" 
  },
  { 
    title: "8. An Ghaeltacht", 
    OL: "An raibh t√∫ riamh sa Ghaeltacht? Ar fhan t√∫ i dteach an chol√°iste?", 
    HL: "Cad √© do thuairim faoi staid na Gaeilge? Cad is f√©idir linn a dh√©anamh chun an teanga a chur chun cinn?" 
  },
  { 
    title: "9. Fadhbanna S√≥isialta", 
    OL: "Cad iad na fadhbanna at√° ag d√©ag√≥ir√≠? (Alc√≥l, druga√≠, bula√≠ocht)", 
    HL: "T√° fadhb na tith√≠ochta agus na dtimpeallachta go dona. Cad a dh√©anfadh an rialtas d√° mbeadh an t-airgead acu?" 
  },
  { 
    title: "10. An Todhcha√≠ (Future)", 
    OL: "Cad a dh√©anfaidh t√∫ tar √©is na scoile? An rachaidh t√∫ go dt√≠ an col√°iste?", 
    HL: "C√©n post ba mhaith leat a fh√°il sa todhcha√≠ agus c√©n f√°th? An rachaidh t√∫ ar imirce, dar leat?" 
  },
  { 
    title: "11. An Aimsir (Weather)", 
    OL: "C√©n sort aimsire at√° againn inniu? An maith leat an samhradh?", 
    HL: "Is bre√° leis na Gaeil a bheith ag caint faoin aimsir. Cad √© do thuairim faoin athr√∫ aer√°ide agus t√©amh domhanda?" 
  },
  { 
    title: "12. Obair Ph√°irtaimseartha", 
    OL: "An bhfuil post p√°irtaimseartha agat? An bhfaigheann t√∫ airgead p√≥ca?", 
    HL: "An bhfuil s√© deacair staid√©ar agus obair a dh√©anamh ag an am c√©anna? Cad iad na bunt√°ist√≠ a bhaineann le post a bheith agat?" 
  },
  { 
    title: "13. Sl√°inte & St√≠l Mhaireacht√°la", 
    OL: "Cad a itheann t√∫ don l√≥n de ghn√°th? An bhfuil t√∫ sl√°inti√∫il?", 
    HL: "An gceapann t√∫ go bhfuil fadhb an otrachta (obesity) in √âirinn? C√©n f√°th a bhfuil bia mear (fast food) chomh coitianta?" 
  },
  { 
    title: "14. Teicneola√≠ocht", 
    OL: "An bhfuil f√≥n p√≥ca agat? C√©n aip is fearr leat (TikTok, Instagram)?", 
    HL: "An bhfuilimid r√≥-sple√°ch ar an teicneola√≠ocht? Pl√©igh an tionchar at√° ag na me√°in sh√≥isialta ar mheabhairshl√°inte daoine √≥ga." 
  },
  { 
    title: "15. Ceol & F√©ilte", 
    OL: "An maith leat ceol? An raibh t√∫ ag ceolchoirm riamh?", 
    HL: "Is t√≠r chult√∫rtha √≠ √âire. An bhfuil suim agat i gceol Gaelach n√≥ i bhf√©ilte mar Electric Picnic?" 
  }
];

// Preguntas extra para el Mock Exam (Pasado y Futuro)
const PAST_Q = ["Cad a rinne t√∫ an deireadh seachtaine seo caite?", "C√° ndeachaigh t√∫ an samhradh seo caite?", "Cad a rinne t√∫ inn√© tar √©is na scoile?"];
const FUT_Q = ["Cad a dh√©anfaidh t√∫ an deireadh seachtaine seo chugainn?", "Cad a dh√©anfaidh t√∫ an samhradh seo chugainn?", "Cad iad na pleananna at√° agat don bhliain seo chugainn?"];

function setLevel(lvl) { 
    currentLevel = lvl; 
    document.getElementById('btnOL').className = lvl === 'OL' ? 'level-btn active' : 'level-btn'; 
    document.getElementById('btnHL').className = lvl === 'HL' ? 'level-btn hl active' : 'level-btn'; 
    if(currentTopic && !isMockExam) updateQuestion(); 
}

function initConv() { 
    const g = document.getElementById('topicGrid'); 
    DATA.forEach((item) => { 
        const b = document.createElement('button'); 
        b.className = 'topic-btn'; 
        b.innerText = item.title; 
        b.onclick = () => { 
            isMockExam = false; 
            document.querySelectorAll('.topic-btn').forEach(x => x.classList.remove('active')); 
            b.classList.add('active'); 
            currentTopic = item; 
            updateQuestion(); 
        }; 
        g.appendChild(b); 
    }); 
}

function speakText() {
    // üîá AUDIO DESACTIVADO INTENCIONADAMENTE PARA IRLAND√âS
    // Como la mayor√≠a de dispositivos no tienen voz nativa 'ga-IE',
    // es mejor que no suene nada a que suene con acento ingl√©s.
    console.log("Audio desactivado para Gaeilge para proteger la pronunciaci√≥n.");
}

// === L√ìGICA DEL MOCK EXAM (Simulacro) ===

function startMockExam() { 
    isMockExam = true; 
    mockIndex = 0; 
    document.querySelectorAll('.topic-btn').forEach(x => x.classList.remove('active')); 
    
    // Elige 3 preguntas aleatorias de los temas + 1 Pasado + 1 Futuro
    let i = [...Array(DATA.length).keys()].sort(() => Math.random() - 0.5); 
    mockQuestions = [
        DATA[i[0]][currentLevel],
        DATA[i[1]][currentLevel],
        DATA[i[2]][currentLevel],
        PAST_Q[Math.floor(Math.random()*PAST_Q.length)],
        FUT_Q[Math.floor(Math.random()*FUT_Q.length)]
    ];
    
    showMockQuestion();
}

function showMockQuestion() {
    document.getElementById('exerciseArea').style.display = 'block'; 
    document.getElementById('result').style.display = 'none'; 
    document.getElementById('qDisplay').innerHTML = `<strong>Ceist ${mockIndex + 1}/5:</strong><br><br>${mockQuestions[mockIndex]}`;
    document.getElementById('userInput').value = "";
}

function nextMockQuestion() {
    mockIndex++;
    showMockQuestion();
}

function updateQuestion() { 
    document.getElementById('exerciseArea').style.display = 'block'; 
    document.getElementById('result').style.display = 'none'; 
    document.getElementById('qDisplay').innerHTML = currentTopic[currentLevel]; 
}

function resetApp() { 
    document.getElementById('result').style.display = 'none'; 
    document.getElementById('exerciseArea').style.display = 'block'; 
    if(isMockExam) {
        isMockExam = false;
        document.getElementById('userInput').value = "";
        document.getElementById('qDisplay').innerHTML = "Select a topic above to start / Roghnaigh topaic thuas.";
    } else {
        document.getElementById('userInput').value = "";
    }
}

async function analyze() {
  const t = document.getElementById('userInput').value; 
  if(t.length < 3) return alert("Please type an answer first / Scr√≠obh freagra le do thoil.");
  
  const b = document.getElementById('btnAction'); 
  b.disabled = true; 
  b.innerText = "‚è≥ Ag ceart√∫ (Grading)...";

  const questionContext = isMockExam ? mockQuestions[mockIndex] : currentTopic[currentLevel];

  // üî• PROMPT ADAPTADO A GAEILGE üî•
  const prompt = `
    ACT AS: Sympathetic Leaving Cert Irish Examiner (Gaeilge).
    CONTEXT: The input is RAW VOICE TRANSCRIPTION or TYPED TEXT. It likely has NO PUNCTUATION and NO CAPITALIZATION.
    
    QUESTION ASKED: "${questionContext}"
    
    CRITICAL INSTRUCTIONS:
    1. IGNORE completely the lack of punctuation/capitalization.
    2. FOCUS on Gaeilge grammar: Tuiseal Ginideach, S√©imhi√∫, √ör√∫, Briathra (Tenses).
    3. CURRENT LEVEL: ${currentLevel}.
       - If OL (Gn√°thleibh√©al): Be GENEROUS. If communication is clear, score HIGH.
       - If HL (Ardleibh√©al): Look for richer vocabulary and correct grammar structures.
    
    TASK:
    Evaluate the student's answer: "${t}"
    
    OUTPUT JSON ONLY:
    {
      "score": (0-100 based on communication & grammar accuracy),
      "feedback_ga": "Brief motivating feedback in Irish (Gaeilge)",
      "feedback_en": "Brief feedback in English explaining the main advice",
      "errors": [
        { "original": "error phrase", "correction": "corrected phrase", "explanation_en": "brief grammar rule (e.g., 'needs an √∫r√∫ after ar')" }
      ]
    }
  `;

  try {
    const r = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-flash-latest:generateContent?key=${API_KEY}`, {
      method: 'POST', 
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
    });
    
    const d = await r.json(); 
    const cleanJson = d.candidates[0].content.parts[0].text.replace(/```json|```/g, "").trim();
    const j = JSON.parse(cleanJson);
    
    document.getElementById('exerciseArea').style.display = 'none'; 
    document.getElementById('result').style.display = 'block';
    document.getElementById('userResponseText').innerText = t;
    
    const s = document.getElementById('scoreDisplay');
    s.innerText = `Sc√≥r: ${j.score}%`;
    s.style.color = j.score >= 85 ? "#166534" : (j.score >= 50 ? "#ca8a04" : "#991b1b");

    document.getElementById('fbGA').innerText = "üáÆüá™ " + j.feedback_ga; 
    document.getElementById('fbEN').innerText = "üá¨üáß " + j.feedback_en;
    
    const l = document.getElementById('errorsList'); 
    l.innerHTML = "";
    
    if(j.errors && j.errors.length > 0) {
        j.errors.forEach(e => { 
            l.innerHTML += `<div class="error-item"><span style="text-decoration: line-through;">${e.original}</span> ‚û°Ô∏è <b>${e.correction}</b> (üí° ${e.explanation_en})</div>`; 
        });
    } else {
        l.innerHTML = "<div style='color:#166534; font-weight:bold;'>‚úÖ Ar fheabhas! (Excellent! No major errors found).</div>";
    }

    // Botones de Navegaci√≥n Mock
    const btnReset = document.getElementById('btnReset');
    if (isMockExam) {
        if (mockIndex < 4) {
            btnReset.innerText = "‚û°Ô∏è Next Question / An Ch√©ad Cheist Eile";
            btnReset.onclick = nextMockQuestion; 
        } else {
            btnReset.innerText = "üèÅ Cr√≠ochnaithe / Finish Exam";
            btnReset.onclick = resetApp;
        }
    } else {
        btnReset.innerText = "üîÑ Try another topic";
        btnReset.onclick = resetApp;
    }

  } catch (e) { 
    console.error(e);
    alert("Error communicating with AI evaluator. Please try again."); 
  } finally { 
    b.disabled = false; 
    b.innerText = "‚ú® Evaluate / Ceartaigh"; 
  }
}

// Inicializar
initConv();
</script>
</body>
</html>
